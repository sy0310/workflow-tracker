<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字段配置测试</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>部门字段配置测试</h2>
        
        <div class="mb-3">
            <label class="form-label">选择部门</label>
            <select class="form-select" id="test-department" onchange="testFields()">
                <option value="">选择部门</option>
                <option value="产业分析">产业分析</option>
                <option value="创意实践">创意实践</option>
                <option value="活动策划">活动策划</option>
                <option value="资源拓展">资源拓展</option>
            </select>
        </div>
        
        <div id="test-output" class="border p-3"></div>
    </div>

    <script src="department-fields-config.js"></script>
    <script>
        function testFields() {
            const department = document.getElementById('test-department').value;
            const output = document.getElementById('test-output');
            
            if (!department || !DEPARTMENT_FIELDS[department]) {
                output.innerHTML = '<p class="text-muted">请选择部门</p>';
                return;
            }
            
            const fields = DEPARTMENT_FIELDS[department];
            
            let html = `<h4>${department} - ${fields.length} 个字段</h4>`;
            html += '<table class="table table-sm"><thead><tr><th>ID</th><th>标签</th><th>字段名</th><th>类型</th></tr></thead><tbody>';
            
            fields.forEach((field, index) => {
                html += `<tr><td>${index + 1}</td><td>${field.label}</td><td>${field.field}</td><td>${field.type}</td></tr>`;
            });
            
            html += '</tbody></table>';
            
            // 测试生成HTML
            html += '<hr><h5>生成的表单HTML:</h5>';
            html += '<div class="border p-2">';
            html += generateTwoColumnFieldsHTML(fields, {}, 'test-');
            html += '</div>';
            
            // 测试数据收集
            html += '<hr><h5>测试数据收集:</h5>';
            html += '<button class="btn btn-sm btn-primary" onclick="testCollect()">收集数据</button>';
            html += '<pre id="collect-result" class="mt-2"></pre>';
            
            output.innerHTML = html;
        }
        
        function testCollect() {
            const department = document.getElementById('test-department').value;
            const data = collectFieldData(department, 'test-');
            document.getElementById('collect-result').textContent = JSON.stringify(data, null, 2);
        }
    </script>
</body>
</html>
